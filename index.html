<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tic Tac Toe - Pure AI Edition</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
  
  :root {
    --bg: #0f172a;
    --panel: #1e293b;
    --cyan: #00ffff;
    --pink: #ff4d4d;
  }

  body { 
    font-family:'Poppins', sans-serif; 
    text-align:center; 
    background: var(--bg); 
    color:white; margin:0; 
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 100vh; overflow: hidden;
    -webkit-user-select: none; user-select: none;
  }

  h1 { font-size:2.5em; margin-bottom: 20px; text-shadow:0 0 20px rgba(0,255,255,0.3);}

  .mode-selector {
    margin-bottom: 30px;
    background: var(--panel);
    padding: 6px;
    border-radius: 50px;
    border: 1px solid rgba(255,255,255,0.1);
  }

  .mode-btn {
    padding: 8px 18px;
    border-radius: 40px;
    border: none;
    background: transparent;
    color: #94a3b8;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
    font-size: 0.85em;
  }

  .mode-btn.active { background: var(--cyan); color: var(--bg); }

  .grid { 
    display:grid; grid-template-columns:repeat(3, 100px); 
    grid-template-rows:repeat(3, 100px); gap:12px; 
    background: rgba(255,255,255,0.03); padding:15px; 
    border-radius:20px; border: 1px solid rgba(0,255,255,0.1);
    position: relative;
  }

  .cell { 
    width:100px; height:100px; font-size:2.5em; font-weight:bold;
    background: var(--panel); border-radius:15px; cursor:pointer; 
    display:flex; align-items:center; justify-content:center; 
    transition: 0.2s;
  }
  .cell:hover:not(.taken) { background:#334155; transform:scale(1.05); }
  .cell[data-p="X"] { color: var(--pink); text-shadow: 0 0 15px var(--pink); }
  .cell[data-p="O"] { color: var(--cyan); text-shadow: 0 0 15px var(--cyan); }

  .game-over-panel { 
    position:absolute; top:0; left:0; width:100%; height:100%; 
    display:none; flex-direction:column; justify-content:center; 
    align-items:center; background:rgba(15, 23, 42, 0.96); 
    border-radius:15px; z-index: 10;
  }
  .game-over-panel.active { display:flex; }

  button.retry {
    margin-top: 15px; padding: 10px 25px; background: var(--cyan);
    border: none; border-radius: 8px; cursor: pointer; font-weight: bold;
    text-transform: uppercase; letter-spacing: 1px;
  }

  .status-text { margin-top: 25px; color: #64748b; font-weight: 500; letter-spacing: 1px; }
</style>
</head>
<body>

<h1>AI ARENA</h1>

<div class="mode-selector">
  <button class="mode-btn active" id="balancedBtn" onclick="setDifficulty(false)">50/50 BALANCED</button>
  <button class="mode-btn" id="hardBtn" onclick="setDifficulty(true)">IMPOSSIBLE AI</button>
</div>

<div class="game-container" style="position:relative;">
  <div class="grid" id="grid"></div>
  <div class="game-over-panel" id="gameOverPanel">
    <h2 id="gameOverTitle">WINNER!</h2>
    <button class="retry" onclick="startGame()">RETRY</button>
  </div>
</div>

<div class="status-text" id="status">YOUR TURN</div>

<script>
let board = Array(9).fill(null);
let gameActive = true;
let impossibleMode = false;

const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playSound(type) {
  if (audioCtx.state === 'suspended') audioCtx.resume();
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.connect(gain);
  gain.connect(audioCtx.destination);

  if (type === 'X') {
    osc.type = 'sine';
    osc.frequency.setValueAtTime(500, audioCtx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
  } else if (type === 'O') {
    osc.type = 'triangle';
    osc.frequency.setValueAtTime(400, audioCtx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(200, audioCtx.currentTime + 0.1);
  } else if (type === 'win') {
    osc.type = 'sine';
    osc.frequency.setValueAtTime(523, audioCtx.currentTime);
    osc.frequency.setValueAtTime(659, audioCtx.currentTime + 0.1);
    osc.frequency.setValueAtTime(783, audioCtx.currentTime + 0.2);
  } else if (type === 'lose') {
    osc.type = 'sawtooth';
    osc.frequency.setValueAtTime(150, audioCtx.currentTime);
    osc.frequency.linearRampToValueAtTime(40, audioCtx.currentTime + 0.4);
  }

  gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.4);
  osc.start();
  osc.stop(audioCtx.currentTime + 0.4);
}

function createGrid() {
  const gridDiv = document.getElementById('grid');
  gridDiv.innerHTML = '';
  for(let i=0; i<9; i++) {
    const cell = document.createElement('div');
    cell.classList.add('cell');
    cell.dataset.index = i;
    cell.onclick = () => handleMove(i);
    gridDiv.appendChild(cell);
  }
}

function handleMove(i) {
  if(!gameActive || board[i]) return;
  makeMove(i, 'X');
  if(gameActive) {
    document.getElementById('status').innerText = "AI THINKING...";
    setTimeout(aiTurn, 400);
  }
}

function makeMove(i, p) {
  board[i] = p;
  const cell = document.querySelector(`[data-index='${i}']`);
  cell.innerText = p;
  cell.dataset.p = p;
  cell.classList.add('taken');
  playSound(p);
  
  const win = checkWin(board);
  if(win) {
    endGame(p === 'X' ? "VICTORY" : "DEFEAT");
  } else if(!board.includes(null)) {
    endGame("DRAW");
  }
}

function aiTurn() {
  if(!gameActive) return;
  let move;
  if (impossibleMode || Math.random() < 0.5) {
    move = minimax(board, 'O').index;
  } else {
    let empty = board.map((v, i) => v === null ? i : null).filter(v => v !== null);
    move = empty[Math.floor(Math.random() * empty.length)];
  }
  makeMove(move, 'O');
  if(gameActive) document.getElementById('status').innerText = "YOUR TURN";
}

function checkWin(b) {
  const p = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  return p.some(s => b[s[0]] && b[s[0]] === b[s[1]] && b[s[0]] === b[s[2]]);
}

function endGame(msg) {
  gameActive = false;
  document.getElementById('gameOverTitle').innerText = msg;
  document.getElementById('gameOverPanel').classList.add('active');
  document.getElementById('status').innerText = "GAME OVER";
  if(msg === "VICTORY") playSound('win');
  else if(msg === "DEFEAT") playSound('lose');
}

function setDifficulty(hard) {
  impossibleMode = hard;
  document.getElementById('balancedBtn').classList.toggle('active', !hard);
  document.getElementById('hardBtn').classList.toggle('active', hard);
  startGame();
}

function startGame() {
  board.fill(null);
  gameActive = true;
  document.getElementById('status').innerText = "YOUR TURN";
  document.getElementById('gameOverPanel').classList.remove('active');
  createGrid();
}

createGrid();
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tic Tac Toe - Pure AI Edition</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
  
  :root {
    --bg: #0f172a;
    --panel: #1e293b;
    --cyan: #00ffff;
    --pink: #ff4d4d;
  }

  body { 
    font-family:'Poppins', sans-serif; 
    text-align:center; 
    background: var(--bg); 
    color:white; margin:0; 
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 100vh; overflow: hidden;
    -webkit-user-select: none; user-select: none;
  }

  h1 { font-size:2.5em; margin-bottom: 20px; text-shadow:0 0 20px rgba(0,255,255,0.3);}

  .mode-selector {
    margin-bottom: 30px;
    background: var(--panel);
    padding: 6px;
    border-radius: 50px;
    border: 1px solid rgba(255,255,255,0.1);
  }

  .mode-btn {
    padding: 8px 18px;
    border-radius: 40px;
    border: none;
    background: transparent;
    color: #94a3b8;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
    font-size: 0.85em;
  }

  .mode-btn.active { background: var(--cyan); color: var(--bg); }

  .grid { 
    display:grid; grid-template-columns:repeat(3, 100px); 
    grid-template-rows:repeat(3, 100px); gap:12px; 
    background: rgba(255,255,255,0.03); padding:15px; 
    border-radius:20px; border: 1px solid rgba(0,255,255,0.1);
    position: relative;
  }

  .cell { 
    width:100px; height:100px; font-size:2.5em; font-weight:bold;
    background: var(--panel); border-radius:15px; cursor:pointer; 
    display:flex; align-items:center; justify-content:center; 
    transition: 0.2s;
  }
  .cell:hover:not(.taken) { background:#334155; transform:scale(1.05); }
  .cell[data-p="X"] { color: var(--pink); text-shadow: 0 0 15px var(--pink); }
  .cell[data-p="O"] { color: var(--cyan); text-shadow: 0 0 15px var(--cyan); }

  .game-over-panel { 
    position:absolute; top:0; left:0; width:100%; height:100%; 
    display:none; flex-direction:column; justify-content:center; 
    align-items:center; background:rgba(15, 23, 42, 0.96); 
    border-radius:15px; z-index: 10;
  }
  .game-over-panel.active { display:flex; }

  button.retry {
    margin-top: 15px; padding: 10px 25px; background: var(--cyan);
    border: none; border-radius: 8px; cursor: pointer; font-weight: bold;
    text-transform: uppercase; letter-spacing: 1px;
  }

  .status-text { margin-top: 25px; color: #64748b; font-weight: 500; letter-spacing: 1px; }
</style>
</head>
<body>

<h1>AI ARENA</h1>

<div class="mode-selector">
  <button class="mode-btn active" id="balancedBtn" onclick="setDifficulty(false)">50/50 BALANCED</button>
  <button class="mode-btn" id="hardBtn" onclick="setDifficulty(true)">IMPOSSIBLE AI</button>
</div>

<div class="game-container" style="position:relative;">
  <div class="grid" id="grid"></div>
  <div class="game-over-panel" id="gameOverPanel">
    <h2 id="gameOverTitle">WINNER!</h2>
    <button class="retry" onclick="startGame()">RETRY</button>
  </div>
</div>

<div class="status-text" id="status">YOUR TURN</div>

<script>
let board = Array(9).fill(null);
let gameActive = true;
let impossibleMode = false;

const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playSound(type) {
  if (audioCtx.state === 'suspended') audioCtx.resume();
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.connect(gain);
  gain.connect(audioCtx.destination);

  if (type === 'X') {
    osc.type = 'sine';
    osc.frequency.setValueAtTime(500, audioCtx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
  } else if (type === 'O') {
    osc.type = 'triangle';
    osc.frequency.setValueAtTime(400, audioCtx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(200, audioCtx.currentTime + 0.1);
  } else if (type === 'win') {
    osc.type = 'sine';
    osc.frequency.setValueAtTime(523, audioCtx.currentTime);
    osc.frequency.setValueAtTime(659, audioCtx.currentTime + 0.1);
    osc.frequency.setValueAtTime(783, audioCtx.currentTime + 0.2);
  } else if (type === 'lose') {
    osc.type = 'sawtooth';
    osc.frequency.setValueAtTime(150, audioCtx.currentTime);
    osc.frequency.linearRampToValueAtTime(40, audioCtx.currentTime + 0.4);
  }

  gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.4);
  osc.start();
  osc.stop(audioCtx.currentTime + 0.4);
}

function createGrid() {
  const gridDiv = document.getElementById('grid');
  gridDiv.innerHTML = '';
  for(let i=0; i<9; i++) {
    const cell = document.createElement('div');
    cell.classList.add('cell');
    cell.dataset.index = i;
    cell.onclick = () => handleMove(i);
    gridDiv.appendChild(cell);
  }
}

function handleMove(i) {
  if(!gameActive || board[i]) return;
  makeMove(i, 'X');
  if(gameActive) {
    document.getElementById('status').innerText = "AI THINKING...";
    setTimeout(aiTurn, 400);
  }
}

function makeMove(i, p) {
  board[i] = p;
  const cell = document.querySelector(`[data-index='${i}']`);
  cell.innerText = p;
  cell.dataset.p = p;
  cell.classList.add('taken');
  playSound(p);
  
  const win = checkWin(board);
  if(win) {
    endGame(p === 'X' ? "VICTORY" : "DEFEAT");
  } else if(!board.includes(null)) {
    endGame("DRAW");
  }
}

function aiTurn() {
  if(!gameActive) return;
  let move;
  if (impossibleMode || Math.random() < 0.5) {
    move = minimax(board, 'O').index;
  } else {
    let empty = board.map((v, i) => v === null ? i : null).filter(v => v !== null);
    move = empty[Math.floor(Math.random() * empty.length)];
  }
  makeMove(move, 'O');
  if(gameActive) document.getElementById('status').innerText = "YOUR TURN";
}

function checkWin(b) {
  const p = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  return p.some(s => b[s[0]] && b[s[0]] === b[s[1]] && b[s[0]] === b[s[2]]);
}

function endGame(msg) {
  gameActive = false;
  document.getElementById('gameOverTitle').innerText = msg;
  document.getElementById('gameOverPanel').classList.add('active');
  document.getElementById('status').innerText = "GAME OVER";
  if(msg === "VICTORY") playSound('win');
  else if(msg === "DEFEAT") playSound('lose');
}

function setDifficulty(hard) {
  impossibleMode = hard;
  document.getElementById('balancedBtn').classList.toggle('active', !hard);
  document.getElementById('hardBtn').classList.toggle('active', hard);
  startGame();
}

function startGame() {
  board.fill(null);
  gameActive = true;
  document.getElementById('status').innerText = "YOUR TURN";
  document.getElementById('gameOverPanel').classList.remove('active');
  createGrid();
}

createGrid();
</scrip
</body>
</html>
